---
- name: build
  hosts: all
  roles:
    - role: default

- name: test
  hosts: all
  roles:
    - role: naftulikay.degoss
      goss_file: goss.yml
      goss_addtl_dirs: [goss.d]
      goss_variables:
        # trusty and centos7 use ntp
        is_ntp: "{{ not is_ubuntu_xenial_derivative }}"
        ntp_package: ntp
        time_service: |-
          {% if is_ubuntu_derivative -%}
            ntp
          {%- elif is_ubuntu_xenial_derivative -%}
            timesyncd
          {%- else -%}
            ntpd
          {%- endif -%}
        time_server_pool_name: "{{ ansible_distribution|lower }}"
